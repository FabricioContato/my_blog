<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building a Comment Section with Free Tools</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.css" rel="stylesheet" />
  
  <link rel="stylesheet" href="./css_js/style.css" type="text/css" media="all">
</head>
<body style="background-color: hsl(35, 30%, 96%)">
  <div class="container" style="background-color: white">
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #2b4b7a;">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">
        <span>&#60;<i class="bi bi-house-door-fill"></i>&#62;</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ">
            <li class="nav-item">
              <a class="nav-link text-white font-weight-bold" href="#">&#60;About&#62;</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white font-weight-bold" href="#">&#60;Contact&#62;</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="card card-body mb-3 mt-3">
      <h1>My first cybersecurity concernss</h1>
      <p>Cybersecurity. It might not be flashy, but if some noob hackers manage to break in, where does that leave my credibility?</p>
      
      <p>My first concerns ended up been:</p>

      <ul>
        <li><strong>CORS</strong> Cross-Origin Resource</li>
        <li><strong>CSP</strong> Content Security Policy</li>
        <li><strong>Input Sanitization (Front-end)</strong> user input Control on the front-end</li>
        <li><strong>Input Sanitization (Back-end)</strong>  user input Control on the back-end</li>
      </ul>
    </div>

    <div class="card card-body mb-3 mt-3">
        <h2>Cross-Origin Resource Sharing (CORS)</h2>
        <p>CORS, in a nutshell, refers to a set of header settings that a server uses to tell a browser which origins are allowed to load its resources.</p>
        <p>For example, if a domain like randomDomain.net tries to access a server's API, but the server’s CORS policy only allows SpecificDomain.net, the user’s browser will block the request.</p>
        <p>This was a concern for my API server. The idea was to configure CORS so that only my domain could access my API endpoints. However, since I’m using Google Apps Script as my API server—and Google enforces its own CORS policies that I can’t modify—there wasn’t much I could do.</p>
        <p>My domain couldn’t even make POST requests—only GET—because Google’s CORS restrictions blocked them. I explained how I worked around this issue in the <a href="/post2.html">previous post</a>.</p>
    </div>

    <div class="card card-body mb-3 mt-3">
        <h2>Content Security Policy (CSP)</h2>
        <p>CSP is a set of rules that a website sends to a browser, telling it what the site's code is allowed—and not allowed—to do. It acts like a security guard, placing restrictions on the scripts and other resources.</p>
        <p>At first, it might seem strange to restrict your own code. After all, if you trust your code, why limit it? But the point isn’t to guard against yourself—it’s to protect users in case someone manages to inject malicious code into your site.</p>
        <p>For my website, the most obvious vulnerability is the comment section (more on that later). If someone were to sneak malicious code into a comment, CSP can help prevent that code from doing serious harm by blocking certain actions—like running inline scripts or sending data to shady domains.</p>

        <p>My CSP:</p>
        <div class="container">
            <pre><code>
/*
  Content-Security-Policy: 
    default-src 'self';
    style-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
    script-src 'self' https://cdn.jsdelivr.net;
    font-src 'self' https://fonts.googleapis.com;
            </code></pre>
        </div>
        <ul>
          <li><code>/*</code> : Instructs to apply the following policies to all domain paths:</li>
          <li><code>default-src 'self'</code> : By default, all resources should come from the domain server itself.</li>
          <li><code>style-src ...</code> : Style sheets (e.g., CSS files) should come from the domain server or from the specified domain(s) on the right.</li>
          <li><code>script-src ...</code> : Script files (e.g., JS files) should come from the domain server or from the specified domain(s) on the right.</li>
          <li><code>font-src ...</code> : Fonts should come from the domain server or from the specified domain(s) on the right.</li>
        </ul>
        <p>Any resources not specified here fall under the default-src rule.</p>
        <p>Note: cdn.jsdelivr.net is the domain that gives my page the bootstrap framework</p>
        <p>My first CSP version included only the <code>default-src 'self'</code> policy. As a result, my website loaded only resources from its own domain, blocking other things like Bootstrap.</p>
        <img class="img-fluid" src="../images/CSP_Violations.png" alt="">
        <p>Using the developer tools, I was able to see exactly what my browser was blocking and from which domains. After some inspection, I added the important domains to my CSP policies.</p>

    </div>


    <form class="card card-body mb-3" id="comment-form">
      <h6 class="mb-3 text-muted">Leave a comment</h6>
      <div class="mb-2">
        <input type="text" name="name" class="form-control form-control-sm border-0 border-bottom rounded-0 bg-transparent" 
          id="name" placeholder="Name" value="12" required>
      </div>
      <div class="mb-2">
        <textarea name="message" class="form-control form-control-sm border-0 border-bottom rounded-0 bg-transparent" 
          id="comment" rows="3" placeholder="Your comment..." required></textarea>
      </div>
      <input type="hidden" name="post_id" id="post_id" value="2">
      <div class="text-end">
        <button type="submit" class="btn btn-sm btn-outline-secondary">Post</button>
      </div>
    </form>
    <span id="loading_comments" class="d-block">Loading comments...</span>
    <span id="sending_comment" class="d-none">Sending your comment...</span>
    <span id="fetching_erro" class="d-none">&#128533; Something went wrong while fetching comments.</span>
    <span id="sending_erro" class="d-none">&#128533; Something went wrong while sending your comment, try again later.</span>
    <span id="invalidComment" class="d-none">&#128679; Your comment or name has fobiden characters ( < > " ' / \ = ( ) { } [ ] ; : @ & + % # $ ` )</span>
    <div id="comments"></div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
  <script type="text/javascript" src="css_js/script.js"></script>
</body>
</html>
